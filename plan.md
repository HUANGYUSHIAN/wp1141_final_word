# Final Project – Midterm Plan

## Deploy Link
https://word-war-app.vercel.app/

## 1. 本次 Prototype 已完成
- 認證系統：Google OAuth 登入、角色選擇（Student/Supplier）、Session 管理、Middleware 路由保護
- 資料庫架構：Prisma Schema 定義、MongoDB 整合、完整的資料模型（User, Student, Supplier, Admin, Vocabulary, Word, Coupon, Store）
- Admin 功能：用戶管理（查看、編輯、刪除、新增、上鎖、升級權限）、單字本管理（CSV 檔案、Excel 匯入）、優惠券管理（CRUD）、分頁顯示
- Student 功能：單字本瀏覽與加入、單字本建立與管理、單字管理（CRUD、批量更新）、優惠券瀏覽與抽獎（含中獎率機制）、我的優惠券查看、遊戲功能（Wordle 猜謎遊戲、貪食蛇遊戲）、點數系統（可用來抽取優惠券）、單字複習頁面、使用者反饋頁面
- Supplier 功能：優惠券管理（建立、編輯、刪除、查看、擁有者列表）、店鋪管理（店名、地址、營業時間、網站）、回饋查看
- UI/UX 基礎：Material-UI 整合、響應式設計、語言選擇組件、基本錯誤處理

## 2. 最終版本預計完成項目
- 完整的使用者流程優化
- 資料驗證與錯誤處理強化
- 安全性強化（API 請求頻率限制、XSS 防護、權限檢查）
- Student 功能完善：個人資料編輯、付款資訊管理、複習功能完善、單字本統計分析
- Supplier 功能完善：優惠券使用統計、店鋪評論管理、店鋪評分統計
- Admin 功能完善：用戶搜尋與篩選、單字本審核功能、優惠券審核功能、系統設定
- 三大主要功能：單字學習系統、優惠券抽獎系統、遊戲點數系統

## 3. 預期開發進度
- Week 1: 完成資料驗證與錯誤處理、安全性強化、Student 個人資料編輯功能
- Week 2: 完成 Supplier 優惠券統計功能、Admin 搜尋與篩選功能、單字本審核功能
- Week 3: 介面調整與最終整合、系統測試、部署優化

---

# 全端背單字 & 抽獎券服務 - 開發計劃與進度

## 📋 專案概述

本專案是一個全端背單字與抽獎券服務平台，提供三種角色完整的服務：
- **Student（學生）**：背單字、獲得優惠券
- **Supplier（優惠券供應者）**：管理優惠券、店鋪資訊
- **Admin（管理員）**：管理用戶、單字本、優惠券

## 🎯 開發階段

### 第一階段：核心功能開發（現階段）
**目標**：建立完整的 CRUD 功能與基本流程，不考慮遊戲、點數計算、用戶體驗優化

### 第二階段：優化與擴展（未來）
**目標**：遊戲功能、點數計算邏輯、用戶體驗優化、進階功能

---

## ✅ 已完成功能

### 1. 認證系統
- [x] Google OAuth 登入
- [x] 測試登入（Credentials）
- [x] 角色選擇（Student/Supplier）
- [x] Session 管理
- [x] Middleware 路由保護
- [x] 新用戶導向角色選擇頁面

### 2. 資料庫架構
- [x] Prisma Schema 定義
- [x] User, Student, Supplier, Admin 資料模型
- [x] Vocabulary, Word 資料模型
- [x] Coupon 資料模型
- [x] Store, Comment 資料模型
- [x] MongoDB 整合

### 3. Admin 功能
- [x] 用戶管理（查看、編輯、刪除、新增、上鎖）
- [x] 單字本管理（查看、編輯、刪除、新增）
- [x] 優惠券管理（查看、編輯、刪除、新增）
- [x] 單字本上傳（Excel 匯入）
- [x] 分頁顯示（大量資料分批載入）
- [x] 管理員設定腳本

### 4. Student 功能
- [x] 單字本瀏覽與加入
- [x] 單字本建立
- [x] 單字本管理（查看、編輯、刪除）
- [x] 單字管理（查看、編輯、刪除、批量更新）
- [x] 優惠券瀏覽
- [x] 優惠券抽獎（已實作 API，但點數計算邏輯待優化）
- [x] 我的優惠券查看
- [x] 設定頁面（基本架構）
- [x] 遊戲頁面（猜謎遊戲、貪食蛇遊戲）
- [x] 複習頁面（基本架構）
- [x] 回饋功能

### 5. Supplier 功能
- [x] 優惠券管理（建立、編輯、刪除、查看）
- [x] 優惠券擁有者查看
- [x] 店鋪管理（建立、編輯、刪除、查看）
- [x] 設定頁面（基本架構）
- [x] 回饋查看

### 6. UI/UX 基礎
- [x] Material UI 整合
- [x] 響應式設計（ResponsiveWrapper）
- [x] 語言選擇組件
- [x] 導航系統
- [x] 基本錯誤處理

---

## 🚧 待開發功能（第一階段）

### 1. Student 功能完善
- [ ] **單字本功能**
  - [ ] 單字本分享功能
  - [ ] 單字本搜尋與篩選
  - [ ] 單字本匯出功能
  - [ ] 單字本統計（學習進度、掌握度等）

- [ ] **優惠券功能**
  - [ ] 優惠券使用記錄
  - [ ] 優惠券過期提醒
  - [ ] 優惠券詳細資訊顯示

- [ ] **設定功能**
  - [ ] 個人資料編輯（電話、生日、語言等）
  - [ ] 付款資訊管理（信用卡等）
  - [ ] 隱私設定

- [ ] **複習功能**
  - [ ] 單字複習列表
  - [ ] 複習進度追蹤
  - [ ] 複習提醒

### 2. Supplier 功能完善
- [ ] **優惠券功能**
  - [ ] 優惠券使用統計
  - [ ] 優惠券效果分析
  - [ ] 優惠券批量管理

- [ ] **店鋪功能**
  - [ ] 店鋪評論管理
  - [ ] 店鋪評分統計
  - [ ] 店鋪資訊完整編輯

- [ ] **設定功能**
  - [ ] 供應商資料編輯
  - [ ] 付款資訊管理
  - [ ] 通知設定

### 3. Admin 功能完善
- [ ] **用戶管理**
  - [ ] 用戶搜尋與篩選
  - [ ] 用戶批量操作
  - [ ] 用戶活動記錄

- [ ] **單字本管理**
  - [ ] 單字本審核功能
  - [ ] 單字本統計分析
  - [ ] 單字本批量操作

- [ ] **優惠券管理**
  - [ ] 優惠券審核功能
  - [ ] 優惠券使用統計
  - [ ] 優惠券批量操作

- [ ] **系統設定**
  - [ ] 系統參數設定
  - [ ] 系統日誌查看
  - [ ] 資料備份與還原

### 4. 資料驗證與錯誤處理
- [ ] 完整的表單驗證
- [ ] 錯誤訊息優化
- [ ] 資料完整性檢查
- [ ] API 錯誤處理統一化

### 5. 安全性強化
- [ ] API 請求頻率限制
- [ ] 資料輸入清理（XSS 防護）
- [ ] 權限檢查強化
- [ ] 敏感資料加密

---

## 🔮 未來優化目標（第二階段）

### 1. 遊戲功能（已部分實作，待優化）
- [ ] 遊戲點數計算邏輯優化
- [ ] 更多遊戲類型
- [ ] 遊戲排行榜
- [ ] 遊戲成就系統
- [ ] 遊戲難度調整

### 2. 點數系統
- [ ] 點數計算邏輯設計
- [ ] 點數獲取規則
- [ ] 點數使用規則
- [ ] 點數歷史記錄
- [ ] 點數轉換機制

### 3. 用戶體驗優化
- [ ] 動畫效果
- [ ] 載入狀態優化
- [ ] 錯誤提示優化
- [ ] 操作流程簡化
- [ ] 無障礙功能（A11y）

### 4. 社交功能
- [ ] 好友系統（LfriendIDs）
- [ ] 單字本分享
- [ ] 學習小組
- [ ] 排行榜

### 5. 進階功能
- [ ] 學習分析與報告
- [ ] 個人化推薦
- [ ] 通知系統
- [ ] 多語言支援擴展
- [ ] 行動裝置 App

---

## 📊 開發進度總覽

### 整體進度：約 60%

#### 已完成模組
- ✅ 認證系統：100%
- ✅ 資料庫架構：100%
- ✅ Admin 核心功能：90%
- ✅ Student 核心功能：70%
- ✅ Supplier 核心功能：70%
- ✅ UI/UX 基礎：60%

#### 進行中
- 🚧 Student 設定功能完善
- 🚧 Supplier 店鋪功能完善
- 🚧 資料驗證與錯誤處理

#### 待開始
- ⏳ 點數系統設計
- ⏳ 遊戲功能優化
- ⏳ 社交功能開發

---

## 🎯 第一階段開發重點

### 優先級 1（核心功能）
1. Student 設定功能完善
2. Supplier 設定功能完善
3. 資料驗證與錯誤處理
4. 安全性強化

### 優先級 2（功能擴展）
1. Student 複習功能完善
2. Supplier 店鋪評論管理
3. Admin 系統設定
4. 統計與分析功能

### 優先級 3（優化）
1. 搜尋與篩選功能
2. 批量操作功能
3. 匯出功能
4. 通知系統基礎

---

## 📝 技術規格

### 前端
- **框架**：Next.js 16 (App Router)
- **UI 框架**：Material UI
- **語言**：TypeScript
- **狀態管理**：React Hooks
- **響應式設計**：自定義 ResponsiveWrapper

### 後端
- **框架**：Next.js API Routes
- **資料庫**：MongoDB
- **ORM**：Prisma
- **認證**：NextAuth.js
- **環境變數**：dotenv

### 部署
- **平台**：Vercel
- **資料庫**：MongoDB Atlas（或本地 MongoDB）

---

## 🔄 開發流程

1. **需求分析**：根據 plan/plan.md 定義功能需求
2. **API 設計**：設計 RESTful API 端點
3. **資料庫設計**：更新 Prisma Schema
4. **後端開發**：實作 API Routes
5. **前端開發**：實作頁面與組件
6. **測試**：功能測試與錯誤修正
7. **部署**：部署到 Vercel

---

## 📌 注意事項

### 現階段不考慮
- ❌ 遊戲功能優化（已實作基本功能，優化留待第二階段）
- ❌ 點數計算邏輯（API 已實作，邏輯優化留待第二階段）
- ❌ 用戶體驗優化（動畫、過渡效果等）
- ❌ 進階統計與分析
- ❌ 社交功能

### 開發原則
1. **功能優先**：先完成核心功能，再考慮優化
2. **資料完整性**：確保資料庫操作的正確性
3. **安全性**：基本的權限檢查與資料驗證
4. **可擴展性**：程式碼結構要便於未來擴展

---

## 📅 更新記錄

- **2024-12-01**：建立開發計劃文檔
  - 列出已完成功能
  - 定義待開發功能
  - 設定開發優先級

---

## 🔗 相關文檔

- [資料結構與規格](./plan/plan.md)
- [OAuth 錯誤處理](./plan/oauth_error.md)
- [OAuth 規格說明](./plan/oauth_spec.md)

